<div
  class="form-group"
  [class.required]="isRequired"
  [class.disabled]="isDisabled"
  [class.inline]="isInline"
  [formGroup]="parentForm"
>
  <mat-form-field
    [floatLabel]="'auto'"
    appearance="outline"
    [class.readonly]="readOnlyCss"
  >
    <mat-label>{{ title }}</mat-label>
    <mat-select
      disableOptionCentering
      [class.is-invalid]="control.invalid && control.touched"
      (selectionChange)="change($event)"
      class="form-control"
      [placeholder]="placeholderText"
      [formControlName]="controlName"
      (opened)="selectOpened(control.value)"
    >
      <mat-option
        [value]="item[keyPropertyName]"
        [id]="item[keyPropertyName]"
        *ngFor="let item of collection; let i = index"
        class="dropdown-item-class auto-height"
      >
        <span [innerHtml]="item[valuePropertyName] || item | safeHtml"></span>
      </mat-option>

      <mat-option
        [value]="item[keyPropertyName]"
        *ngFor="let item of hiddenOptions"
        [class.d-none]="true"
      >
        {{ item[valuePropertyName] || item }}
      </mat-option>
    </mat-select>

    <mat-error>
      <span *ngIf="control.errors?.['required']"> {{ requiredText }} </span>
    </mat-error>
  </mat-form-field>
</div>
